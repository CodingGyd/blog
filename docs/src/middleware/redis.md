---
title: Redis知识点详解
shortTitle: Redis知识点详解
date: 2023-09-21
category:
  - 微服务中间件
description: 记录中间件Redis的常用知识点
head:
  - - meta
    - name: keywords
      content: Redis,非关系型数据库,缓存,NoSQL,分布式缓存,集群,哨兵
---

# Redis知识点详解

## 一、前言

目前计算机世界中的数据库共有2种类型：关系型数据库、非关系型数据库。

**常见的关系型数据库解决方案**

```
MySQL、MariaDB（MySQL的代替品）、Percona Server（MySQL的代替品·）、Oracle、PostgreSQL、
Microsoft Access、Google Fusion Tables、SQLite、DB2、FileMaker、SQL Server、INFORMIX、Sybase、dBASE、Clipper、FoxPro、foshub。
```

几乎所有的数据库管理系统都配备了一个开放式数据库连接（ODBC）驱动程序，令各个数据库之间得以互相集成。

**常见的非关系型数据库解决方案（NoSQL）**

> Not Only SQL

 ```
 Redis、MongoDB、Memcache、HBase、BigTable、Cassandra、CouchDB、Neo4J。
 ```

目前小郭的工作里使用最多的就是Redis了。

**关系型数据库和非关系型数据库的区别**

区别就是一个叫关系型，一个叫非关系型~  这么解释网友们会不会打残我？ 哈哈哈 下面来个正经一点的解释。

*关系型数据库最典型的数据结构是表，由二维表及其之间的联系所组成的一个数据组织，有如下优缺点。*

优点：

- 使用方便

  SQL语言通用，可用于复杂查询；

- 易于维护

  都是使用表结构，格式一致；

- 复杂操作

  支持SQL，可用于一个表以及多个表之间非常复杂的查询。

- 支持事务控制

 缺点：

- 高并发读写性能比较差

  尤其是海量数据的高效读写场景性能比较差，因为硬盘I/O是一个无法避免的瓶颈。

- 灵活度低

  表结构固定，DDL修改对业务影响大。

*非关系型数据库严格上不是一种数据库，应该是一种数据结构化存储方法的集合，可以是文档或者键值对等。有如下优缺点。*

 优点：

- 读写速度快

  IO快，可以使用内存、硬盘或者其它随机存储器作为数据载体，而关系型数据库只能使用硬盘

- 扩展性强

- 数据格式灵活

  存储数据格式可以是kv、文档、图片等等，限制少，应用场景广，而关系型数据只能是内置的基础数据类型

- 成本低

  部署简单，大部分开源免费，社区活跃。

缺点：

- 不支持join等复杂连接操作

- 事务处理能力弱

- 缺乏数据完整性约束

- 不提供SQL支持

  暂时不提供SQL支持，会造成开发任意额外的学习成本

*再来说说为什么需要非关系型数据库技术。*

小郭结合自己的工作经验来总结一下(不喜轻点喷~)，目前的软件产品从用户角度主要分为几个方向：

- To C

  这个方向的软件产品是目前市面上最多的，面向的主要是个人用户，遵循比较规范的产品流程。 通常这类软件的用户量基数巨大且增长快，比如美团的年度交易用户数已从2015年的2亿人，增长到2022年的6.87亿人（2022年Q3财报），平均每2个中国人就有一个在美团上花过钱。用户量大，对性能的要求也会比较高，有可能一瞬间成千上万的请求到来（抢购、促销活动场景不可控），需要系统在极短的时间内完成成千上万次的读/写操作，这个时候往往不是关系型数据库能够承受的，极其容易造成数据库系统瘫痪，最终导致服务宕机的严重生产问题， 因此需要引入缓存解决方案，减少对关系型数据库的影响。 Redis就是一个不二选择。

- To G

  随着近年来不断倡导互联网+，政府也纷纷进行转型，寻求更好的商业模式。To G是从 To B衍生出来的一种特殊划分，面向的企业为政府或相关事业单位，主要是根据每年政府投入的财政预算，然后去做的一系列信息化项目，可以说是“指标驱动，为做项目而做项目”。这类项目有两个极端场景，一类是用户量极低，提供给内部使用的，本地化部署； 还有一类是面向老百姓的，用户量也大，但是对并发要求并不高，比如政务类软件。

  举个栗子：智能考车系统，是典型的公安部主导的一款To G产品，使用对象是考官和公安部相关管理等内部人员，用户量不多；而“交管12123”是直接提供给老百姓使用的APP，可以自行预约考试，处理违章等，面向的是全国十几亿人，用户基数大，海量数据，完全依赖传统的关系型数据库肯定会降低应用访问性能，因此也需要引入新的非关系型数据库解决方案来开发程序功能。

- To B

  这个方向的产品一般是面向商业企业用户的，一般不向大众用户公开。用户量相对较少，通常情况对性能的要求比To C类产品要低一些，一般大部分场景都是直接使用关系型数据库进行数据存储，少部分场景也会额外依赖非关系型数据库。

一句话总结：To C使用场地是随时对地；ToB更多是内网；To G是内外网相结合（互联网+政务）

> 软件研发产品大体是包括这三大类（当然还有To VC , To P 的一些分法，也没错，只是立足点不同）

目前业界的技术选型原则基本是：核心数据存储选择关系型数据库，次要数据存储选择非关系型数据库。

本文接下来主要总结非关系型数据库中的Redis技术的相关知识。

## 二、Redis简介

> redis的官网地址，是redis.io。（域名后缀io属于国家域名，是british Indian Ocean territory，即英属印度洋领地），Vmware在资助着redis项目的开发和维护。
>
> 从2010年3月15日起，Redis的开发工作由VMware主持。从2013年5月开始，Redis的开发由[Pivotal](https://baike.baidu.com/item/Pivotal?fromModule=lemma_inlink)赞助。

### 1）是什么

Redis（Remote Dictionary Server )，即远程字典服务，是一个开源的使用ANSI C语言编写、支持网络、可基于内存亦可持久化的日志型、Key-Value数据库，并提供多种语言的API。Redis属于非关系型数据库中的一种解决方案，目前也是业界主流的缓存解决方案组件。

数百万开发人员在使用Redis用作数据库、缓存、流式处理引擎和消息代理。

### 2）为什么用它

**Redis**是当前互联网世界最为流行的 NoSQL（Not Only SQL）数据库，它的性能十分优越，其性能远超关系型数据库，可以**支持每秒十几万此的读/写操作**，并且还**支持集群、分布式、主从同步等**配置，理论上可以无限扩展节点，它还**支持一定的事务能力**，这也保证了高并发的场景下数据的安全和一致性。

最重要的一点是：Redis的社区活跃，这个很重要。

### 3）优点

- 性能极高

   官方测试数据显示：Redis读的速度是110000次/s,写的速度是81000次/s 。

- 数据类型丰富

  支持 Strings, Lists, Hashes, Sets 及 Ordered Sets 数     据类型操作。

- 原子操作

  所有的操作都是原子性的，同时Redis还支持对几个操作全并后的原子性执行。

- 功能丰富

  提供了缓存淘汰策略、发布定义、lua脚本、简单事务控制、管道技术等功能特性支持

## 三、如何安装

###  1）windows安装

>  Redis在Windows上不受官方支持。但是，我们还是可以按照下面的说明在Windows上安装Redis进行开发。

[官方window安装教程](https://redis.io/docs/getting-started/installation/install-redis-on-windows/)这个照着安装是行不通的！！！！

直接获取开源的redis-window版本安装包：[Releases · tporadowski/redis (github.com)](https://github.com/tporadowski/redis/releases)



![源码包获取](http://cdn.gydblog.com/images/middleware/redis-install-1.png)





### 2）linux安装



## 基础知识-数据类型

## 基础知识-事务

## 基础知识-淘汰策略

## 基础知识-持久化机制

## 基础知识-发布与订阅

## 基础知识-并发问题

缓存穿透、缓存击穿、雪崩

## 进阶知识-主从复制

## 进阶知识-哨兵机制

## 四、基础知识-常用命令

## 常见问题