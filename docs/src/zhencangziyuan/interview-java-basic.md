---
# icon: lock
date: 2023-02-10
category:
  - JAVA面试
tag:
  - 面试题
---

# JAVA面试
> 本篇记录常见的JAVA相关面试题

## 集合框架
::: tip 问题
Q: 你知道为什么HashMap是线程不安全的吗?
:::
- 多线程修改元素会出现不安全
在并发环境下，多个线程同时对HashMap进行修改操作，例如添加、删除、修改元素，可能会导致数据结构出现冲突，最终导致数据不一致或丢失

- 多线程并发扩容会出现不安全
HashMap在达到一定容量时需要进行扩容，扩容过程需要重新计算hash值、重新分配存储位置等操作。如果在扩容过程中有多个线程同时进行插入或删除操作，就可能导致数据结构混乱，死循环等问题。

- hash冲突会出现不安全
hashmap内部使用数组和链表(或红黑树)的数据结构来实现键值对的存储和查找，当多个线程同时进行插入或者删除操作时，可能导致链表或者红黑树的结构被破坏，从而导致数据丢失或者异常

- 线程之间的可见性不安全
当一个线程对HashMap进行修改时，其它线程可能无法立即看到这些修改，就可能导致数据不一致问题。 因此可以使用ConcurretHashMap来替换使用，这个类使用了锁分段技术、cas、volatile变量等机制来保证线程安全和数据可见性